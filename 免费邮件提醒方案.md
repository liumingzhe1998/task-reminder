# 完全免费的邮件提醒方案

使用 **Render 免费版 + cron-job.org** 实现完整的邮件提醒功能！

## 💡 方案说明

**原理：**
1. Web服务部署在 Render 免费版
2. 使用 cron-job.org（免费定时服务）每天定时访问邮件API
3. API触发邮件发送

**优点：**
- ✅ 完全免费（0元/月）
- ✅ 有Web访问
- ✅ 有定时邮件提醒
- ✅ 配置简单
- ✅ 无需编程知识

**缺点：**
- ⚠️ 15分钟休眠（但定时任务会唤醒）
- ⚠️ 需要依赖外部服务

---

## 📋 部署步骤

### 第一步：部署到 Render（免费）

按照 `云部署教程.md` 的步骤，先部署到 Render。

部署完成后，你会得到一个地址，比如：
```
https://task-reminder.onrender.com
```

---

### 第二步：配置邮箱环境变量

在 Render 控制台设置环境变量：

1. 打开你的 Render 服务
2. 点击左侧 "Environment"
3. 添加以下环境变量：

```
Key: API_KEY
Value: task-reminder-secret-key
```

或者设置成你自己的密钥。

---

### 第三步：配置 cron-job.org 定时任务

#### 1. 注册 cron-job.org

1. 访问 https://cron-job.org
2. 点击 "Register" 注册账号
3. 验证邮箱

#### 2. 创建定时任务

登录后：

1. 点击左侧 "Members"
2. 点击 "Create new cron job"

#### 3. 配置任务

**基本信息：**
- **Title**: Task Reminder Email
- **Enabled**: ✓ 勾选

**执行时间：**
- **Execution**: 选择 "Daily" (每天)
- **Time**: 设置你想收到邮件的时间（比如 08:00）
- **Timezone**: 选择 "Asia/Shanghai" (北京时间)

**执行内容：**
- **Type**: HTTP Request
- **URL**: `https://task-reminder.onrender.com/api/send-email`
- **Method**: POST
- **Headers**:
  ```
  X-API-Key: task-reminder-secret-key
  Content-Type: application/json
  ```

**保存：**
- 点击 "Save changes"

---

### 第四步：测试

#### 手动测试

在浏览器或使用 curl 测试：

```bash
curl -X POST https://task-reminder.onrender.com/api/send-email \
  -H "X-API-Key: task-reminder-secret-key" \
  -H "Content-Type: application/json"
```

应该返回：
```json
{
  "success": true,
  "message": "已发送 X 个任务的提醒邮件",
  "sent": true
}
```

#### 立即执行测试

在 cron-job.org：
1. 找到你创建的任务
2. 点击右侧 "Run now"
3. 检查邮箱是否收到邮件

---

## 🎯 完成！

现在你会：
- ✅ 每天8点自动收到任务提醒邮件
- ✅ 随时随地访问Web界面
- ✅ 手机PWA应用
- ✅ 完全免费！

---

## 📊 cron-job.org 限制

**免费版：**
- 最多 60 个定时任务
- 每天最多执行 100 次
- 足够个人使用

**付费版：**
- €6/月
- 无限制

---

## 🔧 高级配置

### 更改邮件时间

1. 登录 cron-job.org
2. 找到你的任务
3. 点击 "Edit"
4. 修改时间
5. 保存

### 多次提醒

如果想要一天多次提醒：
1. 创建多个任务
2. 设置不同的时间

例如：
- 任务1：早上 8:00
- 任务2：中午 12:00
- 任务3：晚上 20:00

---

## ⚠️ 常见问题

### Q: 没有收到邮件？

**检查：**
1. cron-job.org 日志是否显示执行成功
2. Render 日志是否显示API被调用
3. 邮箱配置是否正确
4. 是否有未完成的任务

### Q: API返回 401 错误？

**原因：** API密钥不匹配

**解决：**
- 检查 cron-job.org 的 Header 设置
- 检查 Render 的环境变量
- 确保两者一致

### Q: 定时任务执行了但没收到邮件？

**可能原因：**
- 没有未完成的任务
- 邮箱配置错误
- QQ邮箱授权码过期

---

## 💡 其他免费定时服务

除了 cron-job.org，还有：

### 1. EasyCron
- 网址：https://www.easycron.com
- 免费额度：20个任务/天

### 2. Cronhook
- 网址：https://cronhook.io
- 免费额度：1000次调用/月

### 3. Google Cloud Scheduler
- 网址：https://cloud.google.com/scheduler
- 免费额度：3个任务/天

---

## 🎉 总结

**完全免费方案：**
- Web服务：Render 免费版
- 定时任务：cron-job.org 免费版
- 总费用：**$0/月**

**功能：**
- ✅ Web访问
- ✅ PWA应用
- ✅ 定时邮件提醒
- ✅ 任务管理

**唯一限制：**
- 15分钟休眠（不影响定时任务）

---

开始部署吧！有问题随时问我。
